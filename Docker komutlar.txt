# Docker Cheatsheet ğŸ³

### Basic Docker Commands

- **Mevcut Docker KomutlarÄ±nÄ± Kontrol Et: `docker`
- **Docker SÃ¼rÃ¼mÃ¼nÃ¼ GÃ¶ster:** 		  `docker version`
- **Sistem Bilgilerini GÃ¶ster:**.         `docker info`
- **Konteyner Ã‡alÄ±ÅŸtÄ±r:** 		  `docker run <image:tag>`
- **Konteyner OluÅŸtur:** 		  `docker create <image:tag>`
- **Konteyner Duraklat:** 		  `docker pause <container_id|container_name>`
- **DuraklatÄ±lmÄ±ÅŸ Konteyner'Ä± Devam Ettir:`docker unpause <container_id|container_name>`
- **Konteyner'Ä± Durdur:** 		  `docker stop <container_id|container_name>`
- **Konteyner'Ä± BaÅŸlat:**                 `docker start <container_id|container_name>`
- **Konteyner'Ä± Yeniden BaÅŸlat:**         `docker restart <container_id|container_name>`
- **Konteyner'a BaÄŸlan:**                 `docker attach <container_id|container_name>`
- **Konteyner'larÄ±n DurdurulmasÄ±nÄ± Bekle: `docker wait <container_id|container_name>`
- **Konteyner'Ä± KaldÄ±r:**                 `docker rm <container_id|container_name>`
- **Konteyner'larÄ± Durdur ve KaldÄ±r:**    `docker kill $(docker ps -aq)`

### Docker Image Commands

- **Dockerfile ile Image OluÅŸtur:      `docker build -t <image:tag> .`
- **Docker Hub'dan Image Ã‡ek: 	       `docker pull <image:tag>`
- **Registery'den Image Ã‡ek:** 	       `docker pull <registry/image:tag>`
- **Image'larÄ± Listele:** 	       `docker images`
- **Registery'e Image GÃ¶nder:**        `docker push <repository/image:tag>`
- **Image DosyasÄ±na Etiket Ekle:**     `docker tag <source_image:tag> <target_image:tag>`
- **Image GeÃ§miÅŸini GÃ¶rÃ¼ntÃ¼le (Layers):`docker history <image:tag>`
- **Image DetaylarÄ±nÄ± Ä°ncele:**        `docker inspect <image:tag>`
- **Image DosyasÄ±nÄ± Tar Olarak Kaydet: `docker save <image:tag> -o <filename.tar>`
- **Tar DosyasÄ±ndan Image OluÅŸtur:**   `docker import <filename.tar>`
- **Tar DosyasÄ±ndan Image YÃ¼kle:**     `docker load -i <filename.tar>`
- **Image'larÄ± KaldÄ±r:** 	       `docker rmi <image:tag>`

### Docker Container Commands

- **Konteyner'Ä± BaÅŸlat:** 		  `docker start <container_id|container_name>`
- **Konteyner'Ä± Durdur:** 		  `docker stop <container_id|container_name>`
- **Konteyner'Ä± Duraklat:** 	 	  `docker pause <container_id|container_name>`
- **DuraklatÄ±lmÄ±ÅŸ Konteyner'Ä± Devam Ettir:`docker unpause <container_id|container_name>`
- **Konteyner Ã‡alÄ±ÅŸtÄ±r:** 		  `docker run <image:tag>`
- **Ã‡alÄ±ÅŸan Konteyner'larÄ± Listele:**     `docker ps` | `docker container ls`
- **TÃ¼m Konteyner'larÄ± Listele:**         `docker ps -a` | `docker container ls -a`
- **Konteyner Ä°Ã§erisinde Komut Ã‡alÄ±ÅŸtÄ±r:  `docker exec -it <container_id|container_name> <command>`
- **Konteyner LoglarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le:**      `docker logs <container_id|container_name>`
- **Konteyner'Ä± Yeniden Ä°simlendir:**     `docker rename <old_name> <new_name>`
- **Konteyner'Ä± KaldÄ±r:** 	          `docker rm <container_id|container_name>`
- **Konteyner DetaylarÄ±nÄ± Ä°ncele:**       `docker inspect <container_id|container_name>`
- **Ã‡alÄ±ÅŸan Bir Konteyner'a BaÄŸlan:**     `docker attach <container_id|container_name>`

### Docker Compose Commands

- **Compose Servislerini OluÅŸtur:** 	       `docker-compose build`
- **Compose Servislerini Ã‡alÄ±ÅŸtÄ±r:** 	       `docker-compose up`
- **Compose Servislerini Durdur:** 	       `docker-compose down`
- **Compose Servislerini BaÅŸlat:** 	       `docker-compose start`
- **Compose Servislerini Listele:** 	       `docker-compose ls`
- **Compose Servislerini Tek Seferlik Ã‡alÄ±ÅŸtÄ±r:`docker-compose run <service_name>`
- **Compose Servislerini KaldÄ±r:** 	       `docker-compose rm`
- **Compose Hizmet Durumunu Kontrol Et:**.     `docker-compose ps`
- **Compose Versiyonunu GÃ¶rÃ¼ntÃ¼lemek:**        `docker-compose version`

:: Linux Ãœzerinde Docker Composer Kurulumu ::
```bash
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose

sudo chmod +x /usr/local/bin/docker-compose

docker-compose --version
```

:: MacOS Ãœzerinde Docker Composer Kurulumu :: 
```bash
brew install docker-compose

docker-compose --version
```

::  Docker Compose DosyasÄ± OluÅŸturma :: 
```bash
nano docker-compose.yml
```
```yaml
version: "3"  # Docker Compose sÃ¼rÃ¼m numarasÄ±

services:  # Hizmetlerin baÅŸladÄ±ÄŸÄ± yer
  web:  # Ã–rnek bir hizmet adÄ±
    image: nginx:latest  # KullanÄ±lacak Docker imajÄ±
    container_name: my_web_container  # Docker Container adÄ±
    command: ["nginx", "-g", "daemon off;"]  # BaÅŸlatÄ±lacak komut
    ports:
      - "8080:80"  # Port yÃ¶nlendirmesi (host_port:container_port)
    expose:
      - "3000"  # Container'da aÃ§Ä±k olan port
    environment:
      - MY_ENV_VARIABLE=my_value  # Hizmete Ã¶zel environment deÄŸiÅŸkenleri
      - ANOTHER_VARIABLE=another_value
    volumes:
      - ./html:/usr/share/nginx/html  # Host'tan container'a dosya veya klasÃ¶r montajÄ±
      - /var/www  # Sadece container iÃ§inde bir yol
    networks:
      - my_network  # KullanÄ±lacak aÄŸ adÄ±
    depends_on:
      - database  # Hizmetin baÅŸlamadan Ã¶nce baÅŸlamasÄ± gereken hizmetler
    restart: always  # Hizmetin her zaman yeniden baÅŸlamasÄ±
    links:
      - database:db  # Legacy link, Ã¶nerilmez
    logging:
      driver: "json-file"  # Log sÃ¼rÃ¼cÃ¼sÃ¼
      options:
        max-size: "10m"  # Log dosyasÄ±nÄ±n maksimum boyutu
        max-file: "3"  # Maksimum sayÄ±da log dosyasÄ±

  database:
    image: mysql:latest
    container_name: my_mysql_container
    ports:
      - "3306:3306"
    volumes:
      - db_data:/var/lib/mysql
    environment:
      - MYSQL_ROOT_PASSWORD=root_password
      - MYSQL_DATABASE=mydatabase
      - MYSQL_USER=myuser
      - MYSQL_PASSWORD=mypassword
    healthcheck:  # SaÄŸlÄ±k kontrolÃ¼ iÃ§in ayarlar
      test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
      

    elasticsearch:
      image: docker.elastic.co/elasticsearch/elasticsearch:7.14.0
      container_name: my_elasticsearch_container
      environment:
        - discovery.type=single-node
      ports:
        - "9200:9200"


   kibana:
    image: docker.elastic.co/kibana/kibana:7.14.0
    container_name: my_kibana_container
    environment:
      ELASTICSEARCH_URL: http://elasticsearch:9200
    ports:
      - "5601:5601"
    depends_on:
      - elasticsearch


networks:  # Docker aÄŸlarÄ±nÄ± tanÄ±mlama
  my_network:
    driver: bridge  # KullanÄ±lacak aÄŸ sÃ¼rÃ¼cÃ¼sÃ¼
    ipam:
      driver: default  # IP adreslerini atama sÃ¼rÃ¼cÃ¼sÃ¼
      config:
        - subnet: "172.18.0.0/16"  # AÄŸ alt aÄŸÄ±nÄ± belirleme

volumes:  # Docker volumelerini tanÄ±mlama
  db_data:
    driver: local  # Volume sÃ¼rÃ¼cÃ¼sÃ¼
    driver_opts:
      type: "nfs"  # Opsiyonel: Volume tipi (Ã¶rneÄŸin, NFS)
      o: "addr=192.168.1.1,rw"  # Opsiyonel: Volume seÃ§enekleri

configs:  # Docker configs tanÄ±mlama
  my_config:
    file: ./config.txt
```
### Docker Volume Commands

- **Volume OluÅŸtur:**         `docker volume create <volume_name>`
- **Volume DetaylarÄ±nÄ± Ä°ncele:`docker volume inspect <volume_name>`
- **Volume'leri Listele:**    `docker volume ls`****
- **Volume KaldÄ±r**           `docker volume rm <volume_name>`

### Docker Networking Commands

- **Network OluÅŸturma:** 			    `docker network create <network_name>`
- **Network DetaylarÄ±nÄ± Ä°ncele:** 		    `docker network inspect <network_name>`
- **Network'leri Listele:** 			    `docker network ls`
- **Belirli Subnet ve Gateway ile Network OluÅŸturma:`docker network create --driver=bridge --subnet=<subnet> --ip-range=<ip_range> --gateway=<gateway_ip> <network_name>`
- **Konteyner'Ä± Network'e BaÄŸlamak:**               `docker network connect <network_name> <container_id | container_name>`
- **Konteyner'Ä±n Network ile BaÄŸlantÄ±sÄ±nÄ± Kesmek:** `docker network disconnect <network_name> <container_id | container_name>`
- **MacVlan OluÅŸturmak:** 		            `docker network create --driver=macvlan --subnet=<subnet> --gateway=<gateway> -o parent=<parent_interface> <network_name>`

### Docker Logs and Monitoring Commands

- **TÃ¼m KonteynerlarÄ± gÃ¶rÃ¼ntÃ¼le:  `docker ps -a` | `docker container ls -a`
- **Konteyner LoglarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le:`docker logs <container_id|container_name>`
- **Ã‡alÄ±ÅŸan Ä°ÅŸlemleri GÃ¶rÃ¼ntÃ¼le:* `docker top <container_id|container_name>`
- **Konteyner OlaylarÄ±nÄ± izle:**  `docker events`
- **Kaynak KullanÄ±mÄ±nÄ± izle:**    `docker stats <container_id|container_name>`
- **Public PortlarÄ± GÃ¶ster:**     `docker port <container_id|container_name>`

### Docker Prune Commands

- **AsÄ±lÄ± KaynaklarÄ± Temizle**          `docker system prune`
- **KullanÄ±lmayan Konteyner'larÄ± kaldÄ±r:`docker container prune`
- **AsÄ±lÄ± GÃ¶rÃ¼ntÃ¼leri KaldÄ±r:**         `docker image prune`
- **KullanÄ±lmayan Volume'leri KaldÄ±r:   `docker volume prune`
- **KullanÄ±lmayan Network'leri KaldÄ±r:  `docker network prune`

### Docker Hub Commands

- **Image Arama**        `docker search <image_name>`
- **Docker'a GiriÅŸ Yap:  `docker login`
- **Hub'dan Image Ã‡ek**  `docker pull <image:tag>`
- **Image'Ä± Hub'a GÃ¶nder:`docker push <repository/image:tag>`
- **Image'a Etiket Ekle: `docker tag <source_image:tag> <target_image:tag>`
- **Docker'dan Ã‡Ä±kÄ±ÅŸ Yap:`docker logout`

### Docker Swarm Commands

- **Swarm Durumunu Ä°ncele:**		 `docker info`
- **Swarm Aktif mi DeÄŸil mi KontrolÃ¼:**  `docker info | grep -q "Swarm: active" && echo "Swarm is active" || echo "Swarm is not active"`
- **Swarm Servislerini Listele:** 	 `docker service ls`
-  **Servis DetaylarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le:**     `docker service inspect <service_name>`
-  **Servis GÃ¼ncelleme:** 		 `docker service update --image <new_image><service_name>`
-  **Servis KaldÄ±rma:** 		 `docker service rm <service_name>`
-  **Certificate Authority (CA) Yenileme:`docker swarm ca --rotate`
-  **Swarm'Ä± Durdurmak:** 	         `docker swarm leave --force`
-  **Swarm Kilidi AÃ§ma:** 	         `docker swarm unlock`
-  **Swarm Kilidi AÃ§ma AnahtarÄ± Almak:   `docker swarm unlock-key` 

#### **Node YÃ¶netimi**

- **Swarm Node'larÄ±nÄ± Listele:  `docker node ls`
-  **Node DetaylarÄ±nÄ± GÃ¶rÃ¼ntÃ¼le:`docker node inspect <node_id>`
- **Node Ekleme:** 		`docker swarm join-token worker`
  
  `docker swarm join-token worker
`
- **Node KaldÄ±rma:** `docker node rm <node_id>`
- **Node Promete Etme:** `docker node promote <node_id>`

#### **Stack YÃ¶netimi**

- **Stack'leri Listele:**       `docker stack ls`
-  **Stack Servislerini listele:`docker stack ls <stack_name>`
-  **Stack OluÅŸturma:** 	`docker stack deploy -c <docker-compose-file> <stack_name>`
-  **Stack KaldÄ±rma:** 		`docker stack rm <stack_name>`
-  **Stack GÃ¼ncelle:** 		`docker stack deploy -c <docker-compose-file> <stack_name>`

### **Swarm Visualizer**

- **Swarm Visualizer Servisini BaÅŸlatma:** `docker run -it -d -p 8080:8080 -v /var/run/docker.sock:/var/run/docker.sock dockersamples/visualizer`

### **Portainer**

- **Portainer Konteyner'Ä±nÄ± BaÅŸlatma: `docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer`
- **Portainer Konteyner'Ä±nÄ± Durdurma: `docker stop portainer`
- **Portainer Konteyner'Ä±nÄ± Silme:**  `docker rm portainer`

## Portainer'a EriÅŸim

Portainer artÄ±k [http://localhost:9000](http://localhost:9000) adresinden eriÅŸilebilir. Ä°lk ziyaretinizde bir kullanÄ±cÄ± adÄ± ve ÅŸifre oluÅŸturmanÄ±zÄ± isteyecektir.

## Portainer Konteyner'larÄ±nÄ± YÃ¶netme

### Yeni Bir Container OluÅŸturma:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Containers" â†’ "Add Container" seÃ§eneÄŸini kullanabilirsiniz.

### Konteyner'i DÃ¼zenleme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Containers" â†’ Konteyneri seÃ§in ve "Duplicate/Edit" dÃ¼ÄŸmesini kullanÄ±n.

### Konteyner'i Durdurma:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Containers" â†’ Konteyneri seÃ§in ve "Stop" dÃ¼ÄŸmesini kullanÄ±n.

### Konteyner'i BaÅŸlatma:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Containers" â†’ Konteyneri seÃ§in ve "Start" dÃ¼ÄŸmesini kullanÄ±n.

### Konteyner'i Silme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Containers" â†’ Konteyneri seÃ§in ve "Remove" dÃ¼ÄŸmesini kullanÄ±n.

## Portainer Hizmet ve AÄŸlarÄ± YÃ¶netme

### Yeni Bir Servis OluÅŸturma:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Stacks" â†’ "Add Stack" seÃ§eneÄŸini kullanabilirsiniz.

### Servisi DÃ¼zenleme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Stacks" â†’ Servisi seÃ§in ve "Edit Stack" dÃ¼ÄŸmesini kullanÄ±n.

### Servisi Silme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Stacks" â†’ Servisi seÃ§in ve "Remove Stack" dÃ¼ÄŸmesini kullanÄ±n.

### Yeni Bir AÄŸ OluÅŸturma:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Networks" â†’ "Add Network" seÃ§eneÄŸini kullanabilirsiniz.

### AÄŸÄ± DÃ¼zenleme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Networks" â†’ AÄŸÄ± seÃ§in ve "Edit Network" dÃ¼ÄŸmesini kullanÄ±n.

### AÄŸÄ± Silme:

Portainer web arayÃ¼zÃ¼nden "Local" â†’ "Networks" â†’ AÄŸÄ± seÃ§in ve "Remove Network" dÃ¼ÄŸmesini kullanÄ±n.

### **Secret**

- **Secret OluÅŸturma:** `docker secret create <secret_name> <file_path>`
- **TÃ¼m Secret'larÄ± Listele:** `docker secret ls`
- **Secret Bilgilerini GÃ¶rÃ¼ntÃ¼le:** `docker secret inspect <secret_name>`
- **Servise Secret Eklemek:** `docker service create --name myservice --secret <secret_name> myimage`

#### Stack iÃ§in;

```yaml
version: "3.1"

services:
  myservice:
    image: myimage
    secrets:
      - <secret_name>
secrets:
  <secret_name>:
    file: ./path/to/secret/file
```
- **Secret'i GÃ¼ncelleme:** `docker secret update --secret <secret_name> --new-file <new_file_path>`
- **Secret Silme:** `docker secret rm <secret_name>`
